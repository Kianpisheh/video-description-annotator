{"version":3,"sources":["components/VideoPlayer.jsx","statics/close_btn.svg","statics/indent_btn.svg","statics/outdent_btn.svg","components/StepDescription.jsx","apiCalls.js","components/DescriptionPane.jsx","components/Login.jsx","App.js","reportWebVitals.js","index.js"],"names":["VideoPlayer","props","videoRef","React","createRef","ref","this","url","onPlay","onVideoPlay","current","player","getVideoUrl","controls","Component","StepDescription","textInputRef","btnsDivRef","config","getConfig","item","className","id","toString","style","itemDivStyle","type","placeholder","maxLength","size","autoComplete","draggable","blur","focus","autoFocus","autofocus","readOnly","onClick","event","onSingleClick","value","onKeyDown","onKeyPress","onBlur","sid","src","outdent_btn","alt","indent_btn","close_btn","text","mode","level","textInputStyle","cursor","fontSize","marginLeft","width","height","sendDataToServer","data","sessionTime","videoID","user","a","pruneData","video_id","session_time","descriptions","fetch","method","headers","body","JSON","stringify","then","newData","forEach","d","push","DescriptionPane","counter","state","key","selected","setModeByKey","bind","getMode","addStepAfter","removeWritingStep","getSelected","getWritingStep","deselectAll","getIndex","getWritingIndex","removeItem","updateDescendents","getDescendents","deleteItems","getPrevSibling","groupDescriptions","getSessionTime","handleSingleClick","handleBlur","handleKeyAction","handleDragEnd","stepComponentsList","map","stepList","index","draggableId","provided","draggableProps","dragHandleProps","innerRef","onDoubleClick","handleDoubleClick","onDragEnd","droppableId","droppableProps","prevProps","setState","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","descriptionListG","stepDescriptionList","i","length","result","destination","source","items","sourceStepIndex","destinationStepIndex","steps","destinationOffset","sourceOffset","splice","flat","txt","oldWritingIndex","which","currentStepIndex","descIndexList","prevSiblingIndex","offset","currentStepMode","curretnStepIndex","newStepIndex","preventDefault","shiftKey","oldIndex","oldItemIsRemoved","newIndex","stateItems","descriptionKey","itemIndex","indexOf","parseInt","console","log","undefined","itemsState","mLevel","newItemIndex","newItems","currentStepLevel","desIndexList","action","indexList","includes","fileName","loginUser","credentials","json","Login","setToken","useState","username","setUserName","password","setPassword","handleSubmit","e","token","onSubmit","onChange","target","App","videoId","getToken","handleVideoPlay","videoUrl","newUrl","urlFirstHalf","split","urlSecondHalf","userToken","sessionStorage","setItem","forceUpdate","tokenString","getItem","parse","res","apiResponse","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85667998.chunk.js","sourcesContent":["import React from \"react\";\nimport \"videojs-vr\";\n\nimport \"video.js/dist/video-js.css\";\nimport \"./VideoPlayer.css\";\nimport ReactPlayer from \"react-player\";\n\nexport default class VideoPlayer extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.videoRef = React.createRef()\n    }\n\n    render() {\n        return (\n            <ReactPlayer\n            ref={this.videoRef}\n                url=\"https://youtu.be/lrcDzmIGXWs?list=PL-3W-zZzHzX_3T63nVAH5EmNAhxBIUed7\"\n                onPlay={() => {\n                    this.props.onVideoPlay(this.videoRef.current?.player?.player?.player?.getVideoUrl());\n                }}\n                controls\n            />\n        );\n    }\n\n    componentDidMount() {\n        \n    }\n\n}\n","export default __webpack_public_path__ + \"static/media/close_btn.0eb860d3.svg\";","export default __webpack_public_path__ + \"static/media/indent_btn.1259e6a7.svg\";","export default __webpack_public_path__ + \"static/media/outdent_btn.3d8a08ed.svg\";","import React from \"react\";\n\nimport \"./StepDescription.css\";\nimport close_btn from \"../statics/close_btn.svg\";\nimport indent_btn from \"../statics/indent_btn.svg\";\nimport outdent_btn from \"../statics/outdent_btn.svg\";\n\nexport default class StepDescription extends React.Component {\n    constructor(props) {\n        super(props);\n        this.textInputRef = React.createRef();\n        this.btnsDivRef = React.createRef();\n    }\n\n    render() {\n        var config = this.getConfig(this.props.item);\n\n        return (\n            <div className=\"description-item-div\" id={\"description-item_\" + this.props.id.toString()} style={config.itemDivStyle}>\n                <input\n                    id={\"description-text_\" + this.props.id.toString()}\n                    className=\"description-text\"\n                    key={this.props.sid}\n                    ref={this.textInputRef}\n                    type=\"text\"\n                    placeholder=\"type here...\"\n                    maxLength=\"30\"\n                    size=\"30\"\n                    autoComplete=\"off\"\n                    draggable={true}\n                    blur={config.blur}\n                    focus={config.focus}\n                    autoFocus={config.autofocus}\n                    readOnly={config.readOnly}\n                    style={config.style}\n                    onClick={(event) => this.props.onSingleClick(this.props.id, this.textInputRef.current.value, event)}\n                    onKeyDown={(event) => this.props.onKeyPress(this.props.id, this.textInputRef.current.value, event)}\n                    onBlur={() => this.props.onBlur(this.props.id, this.textInputRef.current.value)}\n                />\n                <div className=\"step-btns-div\" ref={this.btnsDivRef}>\n                    <button\n                        className=\"outdent-btn\"\n                        id={\"outdent_btn_\" + this.props.id.toString()}\n                        onClick={(event) => this.props.onKeyPress(this.props.id, \"outdent_btn\", event)}\n                    >\n                        <img className=\"indentation-btn-img\" src={outdent_btn} alt=\"indent\"></img>\n                    </button>\n                    <button\n                        className=\"indent-btn\"\n                        id={\"indent_btn_\" + this.props.id.toString()}\n                        onClick={(event) => this.props.onKeyPress(this.props.id, \"<-\", event)}\n                    >\n                        <img className=\"indentation-btn-img\" src={indent_btn} alt=\"->\"></img>\n                    </button>\n                    <button\n                        className=\"close-btn\"\n                        id={\"indent_btn_\" + this.props.id.toString()}\n                        onClick={(event) => this.props.onKeyPress(this.props.id, \"close_btn\", event)}\n                    >\n                        <img className=\"close-btn-img\" src={close_btn} alt=\"X\"></img>\n                    </button>\n                </div>\n            </div>\n        );\n    }\n\n    componentDidUpdate() {\n        this.textInputRef.current.value = this.props.item.text;\n        if (this.props.item.mode === \"writing\") {\n            this.textInputRef.current.focus();\n        } else {\n            this.textInputRef.current.blur();\n        }\n    }\n\n    componentDidMount() {\n        this.textInputRef.current.value = this.props.item.text;\n        if (this.props.item.mode === \"writing\") {\n            this.textInputRef.current.focus();\n        } else {\n            this.textInputRef.current.blur();\n        }\n    }\n\n    getConfig(item) {\n        const { mode, level } = item;\n\n        let textInputStyle = {};\n        let itemDivStyle = {};\n        let blur = \"false\";\n        let focus = \"true\";\n        let autofocus = true;\n        let readOnly = false;\n\n        if (mode === \"writing\") {\n            textInputStyle = { cursor: \"text\" };\n        } else if (mode === \"not_writing\") {\n            textInputStyle = { cursor: \"pointer\" };\n            blur = \"true\";\n            focus = \"false\";\n            readOnly = true;\n            autofocus = false;\n        }\n\n        // level-related styling\n        textInputStyle.fontSize = 17;\n        itemDivStyle.marginLeft = 0;\n        itemDivStyle.width = 470;\n        itemDivStyle.height = 45;\n\n        if (level === 2) {\n            textInputStyle.fontSize = 16;\n            itemDivStyle.marginLeft = 60;\n            itemDivStyle.width = 420;\n            itemDivStyle.height = 40;\n        } else if (level === 3) {\n            textInputStyle.fontSize = 15;\n            itemDivStyle.marginLeft = 110;\n            itemDivStyle.width = 395;\n            itemDivStyle.height = 35;\n        }\n\n        return {\n            readOnly: readOnly,\n            style: textInputStyle,\n            focus: focus,\n            blur: blur,\n            autofocus: autofocus,\n            itemDivStyle: itemDivStyle,\n        };\n    }\n}\n","\nexport async function sendDataToServer(data, sessionTime, videoID, user) {\n\n    data = pruneData(data);\n\n    data = {video_id: videoID, session_time: sessionTime, descriptions: data, user: user}\n\n    return fetch('http://localhost:9000/userData', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n    })\n    .then(data => {})\n}\n\nfunction pruneData(data) {\n    let newData = [];\n    data.forEach(d => {\n        newData.push({level: d.level, text: d.text});\n    });\n\n    return newData\n}","import React from \"react\";\n\n\nimport \"./DescriptionPane.css\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\n\nimport StepDescription from \"./StepDescription\";\nimport { sendDataToServer } from \"../apiCalls\"\n\nexport default class DescriptionPane extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.counter = 0;\n\t\tthis.sessionTime = \"\"\n\t\tthis.state = {\n\t\t\tdescriptions: [{ key: 0, mode: \"writing\", level: 1, selected: true, text: \"\" }],\n\t\t};\n\t\tthis.counter += 1;\n\n\t\tthis.setModeByKey = this.setModeByKey.bind(this);\n\t\tthis.getMode = this.getMode.bind(this);\n\t\tthis.addStepAfter = this.addStepAfter.bind(this);\n\t\tthis.removeWritingStep = this.removeWritingStep.bind(this);\n\t\tthis.getSelected = this.getSelected.bind(this);\n\t\tthis.getWritingStep = this.getWritingStep.bind(this);\n\t\tthis.deselectAll = this.deselectAll.bind(this);\n\t\tthis.getIndex = this.getIndex.bind(this);\n\t\tthis.getWritingIndex = this.getWritingIndex.bind(this);\n\t\tthis.removeItem = this.removeItem.bind(this);\n\t\tthis.updateDescendents = this.updateDescendents.bind(this);\n\t\tthis.getDescendents = this.getDescendents.bind(this);\n\t\tthis.deleteItems = this.deleteItems.bind(this);\n\t\tthis.getPrevSibling = this.getPrevSibling.bind(this);\n\t\tthis.groupDescriptions = this.groupDescriptions.bind(this);\n\t\tthis.getSessionTime = this.getSessionTime.bind(this);\n\n\t\tthis.handleSingleClick = this.handleSingleClick.bind(this);\n\t\tthis.handleBlur = this.handleBlur.bind(this);\n\t\tthis.handleKeyAction = this.handleKeyAction.bind(this);\n\t\tthis.handleDragEnd = this.handleDragEnd.bind(this);\n\t}\n\n\trender() {\n\n\t\tif (this.counter === 2) {\n\t\t\tthis.sessionTime = this.getSessionTime();\n\t\t}\n\n\t\tlet descriptionListG = this.groupDescriptions([...this.state.descriptions]);\n\n\t\tlet stepComponentsList = descriptionListG.map((stepList, index) => (\n\t\t\t<Draggable draggableId={index.toString()} key={index.toString()} index={index}>\n\t\t\t\t{(provided) => (<div key={index.toString()} id={index.toString()} className=\"step-div\" {...provided.draggableProps} {...provided.dragHandleProps} ref={provided.innerRef}>\n\t\t\t\t\t{stepList.map((item, index) => (\n\t\t\t\t\t\t<StepDescription\n\t\t\t\t\t\t\tid={item.key.toString()}\n\t\t\t\t\t\t\tkey={item.key.toString()}\n\t\t\t\t\t\t\tonSingleClick={this.handleSingleClick}\n\t\t\t\t\t\t\tonDoubleClick={this.handleDoubleClick}\n\t\t\t\t\t\t\tonBlur={this.handleBlur}\n\t\t\t\t\t\t\tonKeyPress={this.handleKeyAction}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</div>)}\n\t\t\t</Draggable>\n\t\t));\n\n\t\treturn <DragDropContext onDragEnd={this.handleDragEnd}>\n\t\t\t<Droppable droppableId=\"description-pane-droppable\" >\n\t\t\t\t{(provided) => (<div id=\"description-pane-container\" ref={provided.innerRef} {...provided.droppableProps}>{stepComponentsList}{provided.placeholder}</div>)}\n\t\t\t</Droppable>\n\t\t</DragDropContext>\n\n\t}\n\n\tcomponentDidUpdate(prevProps) {\n\t\tif (prevProps.videoID !== this.props.videoID) {\n\t\t\tthis.setState({descriptions: [{ key: 0, mode: \"writing\", level: 1, selected: true, text: \"\" }]});\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\t//fetch(\"http://localhost:3000\").then(res => (console.log(res.text()))).catch(err => err)\n\t}\n\n\tgetSessionTime() {\n\t\tlet d = new Date();\n\t\tconst sessionTime = `${d.getFullYear()}-${d.getMonth() + 1}-${d.getDate()}-${d.getHours()}-${d.getMinutes()}-${d.getSeconds()}`;\n\t\treturn sessionTime;\n\t}\n\n\tgroupDescriptions(descriptions) {\n\t\tlet descriptionListG = [];\n\t\tlet stepDescriptionList = [];\n\t\tfor (let i = 0; i < descriptions.length; i++) {\n\t\t\t// new step\n\t\t\tif (descriptions[i].level === 1) {\n\t\t\t\tif (stepDescriptionList.length) {\n\t\t\t\t\tdescriptionListG.push(stepDescriptionList);\n\t\t\t\t}\n\t\t\t\tstepDescriptionList = [descriptions[i]];\n\t\t\t} else {\n\t\t\t\t// descendents\n\t\t\t\tstepDescriptionList.push(descriptions[i]);\n\t\t\t}\n\t\t\tif (i === descriptions.length - 1) {\n\t\t\t\tif (stepDescriptionList.length) {\n\t\t\t\t\tdescriptionListG.push(stepDescriptionList);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn descriptionListG;\n\t}\n\n\thandleDragEnd(result) {\n\t\tif (result.destination == null) return;\n\t\tif (result.destination.index === result.source.index) return;\n\n\t\tlet items = [...this.state.descriptions];\n\t\t// step-set level index\n\t\tconst sourceStepIndex = result.source.index;\n\t\tconst destinationStepIndex = result.destination.index;\n\n\t\tlet steps = this.groupDescriptions(items);\n\t\tlet destinationOffset = destinationStepIndex > sourceStepIndex ? 1 : 0;\n\t\tlet sourceOffset = destinationStepIndex > sourceStepIndex ? 0 : 1;\n\n\t\t// move a copy of source step into the new location\n\t\tsteps.splice(destinationStepIndex + destinationOffset, 0, steps[sourceStepIndex]);\n\t\t// remove the old copy of source step\n\t\tsteps.splice(sourceStepIndex + sourceOffset, 1);\n\t\tsendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\tthis.setState({ descriptions: steps.flat() });\n\t}\n\n\thandleSingleClick(key, txt) {\n\t\tlet items = [...this.state.descriptions];\n\t\tif (txt !== \"\") {\n\t\t\tlet index = this.getIndex(items, key, 0);\n\t\t\tconst oldWritingIndex = this.getWritingIndex(items);\n\t\t\tif (oldWritingIndex >= 0) {\n\t\t\t\titems[oldWritingIndex].mode = \"not_writing\";\n\t\t\t}\n\t\t\titems[index].mode = \"writing\";\n\t\t\titems = this.deselectAll(items);\n\t\t\titems[index].selected = true;\n\t\t\tthis.setState({ descriptions: items });\n\t\t}\n\t}\n\n\thandleBlur(key, txt) {\n\t\tlet items = [...this.state.descriptions];\n\t\tif (txt !== \"\") {\n\t\t\tconst index = this.getIndex(items, key, 0);\n\t\t\titems[index].mode = \"not_writing\";\n\t\t\titems[index].text = txt;\n\t\t} else if (txt === \"\" && items.length > 1) {\n\t\t\titems = this.removeWritingStep(items);\n\t\t}\n\t\t//sendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\tthis.setState({ descriptions: items });\n\t}\n\n\thandleKeyAction(key, txt, event) {\n\t\tlet items = [...this.state.descriptions];\n\n\t\t// del --> delete step\n\t\tif (event.which === 46 || (event.type === 'click' && txt === 'close_btn')) {\n\t\t\tlet currentStepIndex = null;\n\t\t\tif (key === null) {\n\t\t\t\t// delete (window listener)\n\t\t\t\tcurrentStepIndex = this.getSelected(items);\n\t\t\t} else {\n\t\t\t\t// delete (<input> listener)\n\t\t\t\tcurrentStepIndex = this.getIndex(items, key, 0);\n\t\t\t}\n\n\t\t\tif ((items[currentStepIndex].selected || (event.type === 'click' && txt === 'close_btn')) && items.length >= 2) {\n\t\t\t\t// select the previous/next step\n\t\t\t\titems = this.deselectAll(items);\n\t\t\t\tconst descIndexList = this.getDescendents(items, currentStepIndex);\n\t\t\t\tif (currentStepIndex === 0) {\n\t\t\t\t\titems[currentStepIndex + descIndexList.length].selected = true;\n\t\t\t\t} else {\n\t\t\t\t\tconst prevSiblingIndex = this.getPrevSibling(items, currentStepIndex);\n\t\t\t\t\tlet offset = 1;\n\t\t\t\t\tif (!(prevSiblingIndex == null)) {\n\t\t\t\t\t\tconst prevStepDescIndexList = this.getDescendents(\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\tprevSiblingIndex\n\t\t\t\t\t\t);\n\t\t\t\t\t\toffset = prevStepDescIndexList.length;\n\t\t\t\t\t}\n\t\t\t\t\titems[currentStepIndex - offset].selected = true;\n\t\t\t\t}\n\t\t\t\t// do not delete everything\n\t\t\t\tif (descIndexList.length < items.length) {\n\t\t\t\t\titems = this.deleteItems(items, descIndexList);\n\t\t\t\t\tsendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t// Enter --> nex step (writing)\n\t\telse if (event.which === 13 && txt !== \"\") {\n\t\t\tconst currentStepMode = this.getMode(items, key, 0);\n\t\t\tconst curretnStepIndex = this.getIndex(items, key, 0);\n\t\t\tlet newStepIndex = curretnStepIndex;\n\t\t\tif (\n\t\t\t\tcurrentStepMode === \"writing\" ||\n\t\t\t\t(currentStepMode === \"not_writing\" && items[curretnStepIndex].selected)\n\t\t\t) {\n\t\t\t\t// change the current step to non-writing and add one writing step after it\n\t\t\t\titems[curretnStepIndex].mode = \"not_writing\";\n\t\t\t\titems[curretnStepIndex].text = txt;\n\t\t\t\t// select the current step\n\t\t\t\titems = this.deselectAll(items);\n\t\t\t\t[items, newStepIndex] = this.addStepAfter(items, key, \"writing\", null);\n\t\t\t\titems[newStepIndex].selected = true;\n\t\t\t\titems[newStepIndex].mode = \"writing\";\n\t\t\t\tsendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t}\n\t\t}\n\n\t\t// Tab or Shift + Tab\n\t\telse if (event.which === 9 || event.type === \"click\") {\n\t\t\tevent.preventDefault();\n\t\t\t// perform indention if it is writing\n\t\t\tconst currentStepIndex = this.getIndex(items, key, 0);\n\n\t\t\tif (currentStepIndex > 0) {\n\t\t\t\tconst descIndexList = this.getDescendents(items, currentStepIndex);\n\t\t\t\t// only tab\n\t\t\t\tif (!event.shiftKey || txt === \"indent_btn\") {\n\t\t\t\t\tif ((items[currentStepIndex].mode === \"writing\" || txt === \"indent_btn\") && items.length > 1) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\titems[currentStepIndex - 1].level >=\n\t\t\t\t\t\t\titems[currentStepIndex].level &&\n\t\t\t\t\t\t\titems[currentStepIndex].level <= 2\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\titems[currentStepIndex].level += 1;\n\t\t\t\t\t\t\titems = this.updateDescendents(\n\t\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\t\tdescIndexList,\n\t\t\t\t\t\t\t\t\"level_increase\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\t\t\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} if (event.shiftKey || txt === \"outdent_btn\") {\n\t\t\t\t\t// shift + tab\n\t\t\t\t\tif (items[currentStepIndex].level >= 2) {\n\t\t\t\t\t\titems[currentStepIndex].level -= 1;\n\t\t\t\t\t\titems = this.updateDescendents(\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t\tdescIndexList,\n\t\t\t\t\t\t\t\"level_decrease\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsendDataToServer(items, this.sessionTime, this.props.videoID, this.props.user);\n\t\t\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// down\n\t\telse if (event.which === 40) {\n\t\t\titems = [...this.state.descriptions];\n\t\t\tconst oldIndex = this.getIndex(items, key, 0);\n\n\t\t\t// can't go down\n\t\t\tif (oldIndex === items.length - 1) {\n\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// update the selected item\n\t\t\tif (txt !== \"\") { // keep the old item\n\t\t\t\titems[oldIndex].text = txt;\n\t\t\t\titems[oldIndex].selected = false;\n\t\t\t\titems[oldIndex].mode = \"not_writing\";\n\n\t\t\t\t// select the new item\n\t\t\t\titems[oldIndex + 1].selected = true;\n\t\t\t\titems[oldIndex + 1].mode = \"writing\";\n\n\t\t\t} else { // must be removed\n\t\t\t\titems = this.removeItem(items, oldIndex);\n\n\t\t\t\t// select the new item\n\t\t\t\titems[oldIndex].selected = true;\n\t\t\t\titems[oldIndex].mode = \"writing\";\n\t\t\t}\n\t\t\tthis.setState({ descriptions: items });\n\t\t}\n\n\t\t// up\n\t\telse if (event.which === 38) {\n\t\t\titems = [...this.state.descriptions];\n\t\t\tconst oldIndex = this.getIndex(items, key, 0);\n\n\t\t\t// can't go up\n\t\t\tif (oldIndex === 0) {\n\t\t\t\tthis.setState({ descriptions: items });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// update the selected item\n\t\t\tif (txt !== \"\") { // keep the old item\n\t\t\t\titems[oldIndex].text = txt;\n\t\t\t\titems[oldIndex].selected = false;\n\t\t\t\titems[oldIndex].mode = \"not_writing\";\n\n\t\t\t\t// select the new item\n\t\t\t\titems[oldIndex - 1].selected = true;\n\t\t\t\titems[oldIndex - 1].mode = \"writing\";\n\n\t\t\t} else { // must be removed\n\t\t\t\titems = this.removeItem(items, oldIndex);\n\n\t\t\t\t// select the new item\n\t\t\t\titems[oldIndex - 1].selected = true;\n\t\t\t\titems[oldIndex - 1].mode = \"writing\";\n\t\t\t}\n\t\t\tthis.setState({ descriptions: items });\n\t\t}\n\n\t\telse if (event.which === 40 || event.which === 38) {\n\t\t\titems = [...this.state.descriptions];\n\t\t\tconst oldIndex = this.getIndex(items, key, 0);\n\n\t\t\tif (oldIndex === items.length - 1 && event.which === 40) return;\n\t\t\tif (oldIndex === 0 && event.which === 38) return;\n\n\t\t\t// take care of the old selected item\n\t\t\tlet oldItemIsRemoved = false;\n\t\t\tif (txt === \"\") {\n\t\t\t\tif (items.length > 1) { // should be  deleted\n\t\t\t\t\titems = this.removeItem(items, oldIndex);\n\t\t\t\t\toldItemIsRemoved = true;\n\t\t\t\t} else {\n\t\t\t\t\treturn; // length = 0 --> you cannot go to another item\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titems[oldIndex].text = txt;\n\t\t\t\titems[oldIndex].selected = false;\n\t\t\t\titems[oldIndex].mode = \"not_writing\";\n\t\t\t}\n\n\t\t\t// selected the new item (already know that items.length > 1)\n\t\t\tlet newIndex = oldIndex;\n\t\t\tif (event.which === 40) {  // down\n\t\t\t\tif (!oldItemIsRemoved && oldIndex < items.length - 1) {\n\t\t\t\t\tnewIndex = oldIndex + 1;\n\t\t\t\t}\n\t\t\t} else { // up\n\t\t\t\tif (oldIndex > 0)\n\t\t\t\t\tnewIndex = oldIndex - 1;\n\t\t\t}\n\t\t\titems = this.deselectAll(items);\n\t\t\titems[newIndex].selected = true;\n\t\t\titems[newIndex].mode = \"writing\";\n\t\t\tthis.setState({ descriptions: items });\n\t\t}\n\t}\n\n\t// TODO:\n\t// 4) add guiddance (key bindings, ...)\n\t// 5) record timestamp\n\t// 6) record video control events (number of times, and types (jump to the future/past))\n\n\tgetIndex(stateItems, descriptionKey, offset) {\n\t\tlet items = [...stateItems];\n\t\tlet itemIndex = items\n\t\t\t.map((item) => item.key)\n\t\t\t.indexOf(parseInt(descriptionKey));\n\t\tif (itemIndex >= 0) {\n\t\t\treturn itemIndex + offset;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tgetWritingIndex(items) {\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].mode === \"writing\") {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tsetModeByKey(stateItems, descriptionKey, mode) {\n\t\tlet items = [...stateItems];\n\t\tlet itemIndex = items\n\t\t\t.map((item) => item.key)\n\t\t\t.indexOf(parseInt(descriptionKey));\n\t\tif (itemIndex >= 0) {\n\t\t\titems[itemIndex].mode = mode;\n\t\t} else {\n\t\t\tconsole.log(\"step description does not exist\");\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tgetMode(stateItems, descriptionKey, offset) {\n\t\tlet items = [...stateItems];\n\t\tlet itemIndex = items\n\t\t\t.map((item) => item.key)\n\t\t\t.indexOf(parseInt(descriptionKey));\n\t\tif (items[itemIndex + offset] !== undefined) {\n\t\t\treturn items[itemIndex + offset].mode;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tgetSelected(items) {\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].selected) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tgetWritingStep(items) {\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].mode === \"writing\") {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tdeselectAll(items) {\n\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\tif (items[i].selected) {\n\t\t\t\titems[i].selected = false;\n\t\t\t}\n\t\t}\n\t\treturn items;\n\t}\n\n\taddStepAfter(itemsState, key, mode, level) {\n\t\tlet items = [...itemsState];\n\t\tlet itemIndex = items.map((item) => item.key).indexOf(parseInt(key));\n\t\t// add the new step\n\t\tlet mLevel = level;\n\t\tif (level === null) {\n\t\t\tmLevel = items[itemIndex].level;\n\t\t}\n\t\tconst descIndexList = this.getDescendents(items, itemIndex);\n\t\tlet newItemIndex = descIndexList[descIndexList.length - 1] + 1;\n\t\titems.splice(newItemIndex, 0, {\n\t\t\tkey: this.counter,\n\t\t\tmode: mode,\n\t\t\tlevel: mLevel,\n\t\t\tselected: true,\n\t\t\ttext: \"\"\n\t\t});\n\t\tthis.counter += 1;\n\n\t\treturn [items, newItemIndex];\n\t}\n\n\tremoveWritingStep(itemsState) {\n\t\tlet items = [...itemsState];\n\t\tlet newItems = [...items];\n\t\tfor (let i = 1; i < items.length; i++) {\n\t\t\tif (items[i].mode === \"writing\") {\n\t\t\t\tnewItems.splice(i, 1);\n\t\t\t\treturn newItems;\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"Didn't find the item, to remove\");\n\t\treturn newItems;\n\t}\n\n\tremoveItem(items, index) {\n\t\titems.splice(index, 1);\n\t\treturn items;\n\t}\n\n\tgetDescendents(items, index) {\n\t\tlet descIndexList = [index];\n\t\tconst currentStepLevel = items[index].level;\n\t\tfor (let i = index + 1; i < items.length; i++) {\n\t\t\tif (items[i].level > currentStepLevel) {\n\t\t\t\tdescIndexList.push(i);\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn descIndexList;\n\t}\n\n\tupdateDescendents(items, desIndexList, action) {\n\t\tfor (let i = 1; i < desIndexList.length; i++) {\n\t\t\tif (action === \"level_increase\") {\n\t\t\t\titems[desIndexList[i]].level += 1;\n\t\t\t} else if (action === \"level_decrease\") {\n\t\t\t\titems[desIndexList[i]].level -= 1;\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tdeleteItems(items, indexList) {\n\t\tlet newItems = [];\n\t\titems.forEach((item, index) => {\n\t\t\tif (!indexList.includes(index)) {\n\t\t\t\tnewItems.push(item);\n\t\t\t}\n\t\t});\n\t\treturn newItems;\n\t}\n\n\tgetPrevSibling(items, index) {\n\t\t// pre-condition: index > 0\n\t\tfor (let i = index - 1; i > 0; i--) {\n\t\t\tif (items[i].level < items[index].level) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (items[index].level === items[i].level) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tsaveUserData(descriptions, fileName) {\n\t\t//const descriptionsJson = JSON.stringify(descriptions);\n\t}\n}\n","import React, { useState } from 'react';\nimport PropTypes from \"prop-types\"\n\nimport \"./Login.css\"\n\n\n\nasync function loginUser(credentials) {\n    return fetch('http://localhost:9000/login', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n    }).then(data => data.json())\n}\n\n\nexport default function Login({ setToken }) {\n    const [username, setUserName] = useState();\n    const [password, setPassword] = useState();\n\n\n    const handleSubmit = async e => {\n        e.preventDefault();\n        const token = await loginUser({\n            username,\n            password\n        });\n        console.log(token)\n        setToken(token, username);\n    }\n\n\n    return (\n        <div id=\"login-container\">\n            <h1 id=\"login-title\">Login</h1>\n            <form autoComplete={\"off\"} onSubmit={handleSubmit}>\n                <div id='username-label-div'>\n                    <label>\n                        <input className=\"login-text-input\" type=\"text\" placeholder=\"username\" onChange={e => setUserName(e.target.value)} />\n                    </label>\n                </div>\n                <div id='password-label-div'>\n                    <label>\n                        <input className=\"login-text-input\" type=\"password\" placeholder=\"password\" autoComplete={\"off\"} onChange={e => setPassword(e.target.value)} />\n                    </label>\n                </div>\n                <div id='login-btn-div'>\n                    <button type=\"submit\">Login</button>\n                </div>\n            </form>\n        </div >\n    )\n}\n\nLogin.propTypes = {\n    setToken: PropTypes.func.isRequired\n}","import React from \"react\";\n\nimport \"video.js/dist/video-js.css\";\n\nimport VideoPlayer from \"./components/VideoPlayer\";\nimport DescriptionPane from \"./components/DescriptionPane\";\nimport Login from \"./components/Login\"\n\nimport \"./App.css\";\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { videoId: \"\", token: \"\" };\n        this.user = \"\";\n\n        this.setToken = this.setToken.bind(this);\n        this.getToken = this.getToken.bind(this);\n        this.handleVideoPlay = this.handleVideoPlay.bind(this);\n\n    }\n\n    render() {\n        \n        const token = this.getToken();\n\n        if (!token) {\n            return <Login setToken={this.setToken} />\n        }\n\n        return (\n            <div id=\"main-container\">\n                <div id=\"player-container\">\n                    <VideoPlayer id=\"video-player\" onVideoPlay={this.handleVideoPlay} />\n                </div>\n                <DescriptionPane id=\"description-pane\" videoID={this.state.videoId} user={this.user} />\n            </div>\n        );\n    }\n\n    handleVideoPlay(videoUrl) {\n        \n        // remove time from the url\n        let newUrl = videoUrl;\n        if (videoUrl.includes('&t=')) {\n            const urlFirstHalf = videoUrl.split('&t=')[0];\n            let urlSecondHalf = videoUrl.split('&t=')[1];\n            if (urlSecondHalf.includes(\"&v=\")) {\n                urlSecondHalf = '&v=' + urlSecondHalf.split('&v=')[1];\n            }\n            newUrl = urlFirstHalf + urlSecondHalf;\n        }\n        \n        if (this.state.videoId !== newUrl) {\n            this.setState({videoId: newUrl})\n        }\n    }\n\n    setToken(userToken, username) {\n        sessionStorage.setItem('token', JSON.stringify(userToken));\n        this.user = username;\n        sessionStorage.setItem('user', this.user);\n        this.forceUpdate();\n    }\n    \n    getToken() {\n        const tokenString = sessionStorage.getItem('token');\n        const userToken = JSON.parse(tokenString);\n        this.user = sessionStorage.getItem('user');\n        return userToken?.token\n    }\n\n    callAPI() {\n        fetch(\"http://localhost:9000/testAPI\")\n            .then(res => res.text())\n            .then(res => this.setState({ apiResponse: res }));\n    }\n\n    componentDidMount() {\n        //this.callAPI();\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}