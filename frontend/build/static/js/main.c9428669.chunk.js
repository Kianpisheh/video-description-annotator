(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{52:function(e,t,n){},53:function(e,t){},65:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var i=n(1),s=n.n(i),r=n(18),o=n.n(r),c=(n(52),n(13)),a=n(14),l=n(7),d=n(16),u=n(15),h=(n(36),n(92),n(65),n(47)),p=n.n(h),f=n(5),v=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).videoRef=s.a.createRef(),i}return Object(a.a)(n,[{key:"render",value:function(){var e=this;return Object(f.jsx)(p.a,{ref:this.videoRef,url:"https://youtu.be/bfF4PATuQ0s?list=PLUb0DMgBZVOOdt6VnxipIjbFQWesrJkr3",onPlay:function(){var t,n,i,s;e.props.onVideoPlay(null===(t=e.videoRef.current)||void 0===t||null===(n=t.player)||void 0===n||null===(i=n.player)||void 0===i||null===(s=i.player)||void 0===s?void 0:s.getVideoUrl())},controls:!0})}},{key:"componentDidMount",value:function(){}}]),n}(s.a.Component),g=n(23),b=n(19),j=n(10),m=(n(86),n(28)),O=(n(87),n.p+"static/media/close_btn.0eb860d3.svg"),y=n.p+"static/media/indent_btn.1259e6a7.svg",x=n.p+"static/media/outdent_btn.3d8a08ed.svg",k=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).textInputRef=s.a.createRef(),i.btnsDivRef=s.a.createRef(),i}return Object(a.a)(n,[{key:"render",value:function(){var e=this,t=this.getConfig(this.props.item);return Object(f.jsxs)("div",{className:"description-item-div",id:"description-item_"+this.props.id.toString(),style:t.itemDivStyle,children:[Object(f.jsx)("input",{id:"description-text_"+this.props.id.toString(),className:"description-text",ref:this.textInputRef,type:"text",placeholder:"type here...",maxLength:"50",size:"30",autoComplete:"off",draggable:!0,blur:t.blur,focus:t.focus,autoFocus:t.autofocus,readOnly:t.readOnly,style:t.style,onClick:function(t){return e.props.onSingleClick(e.props.id,e.textInputRef.current.value,t)},onKeyDown:function(t){return e.props.onKeyPress(e.props.id,e.textInputRef.current.value,t)},onBlur:function(){return e.props.onBlur(e.props.id,e.textInputRef.current.value)}},this.props.sid),Object(f.jsxs)("div",{className:"step-btns-div",ref:this.btnsDivRef,children:[Object(f.jsx)("button",{className:"outdent-btn",id:"outdent_btn_"+this.props.id.toString(),onClick:function(t){return e.props.onKeyPress(e.props.id,"outdent_btn",t)},children:Object(f.jsx)("img",{className:"indentation-btn-img",src:x,alt:"indent"})}),Object(f.jsx)("button",{className:"indent-btn",id:"indent_btn_"+this.props.id.toString(),onClick:function(t){return e.props.onKeyPress(e.props.id,"<-",t)},children:Object(f.jsx)("img",{className:"indentation-btn-img",src:y,alt:"->"})}),Object(f.jsx)("button",{className:"close-btn",id:"indent_btn_"+this.props.id.toString(),onClick:function(t){return e.props.onKeyPress(e.props.id,"close_btn",t)},children:Object(f.jsx)("img",{className:"close-btn-img",src:O,alt:"X"})})]})]})}},{key:"componentDidUpdate",value:function(){this.textInputRef.current.value=this.props.item.text,"writing"===this.props.item.mode?this.textInputRef.current.focus():this.textInputRef.current.blur()}},{key:"componentDidMount",value:function(){this.textInputRef.current.value=this.props.item.text,"writing"===this.props.item.mode?this.textInputRef.current.focus():this.textInputRef.current.blur()}},{key:"getConfig",value:function(e){var t=e.mode,n=e.level,i={},s={},r="false",o="true",c=!0,a=!1;return"writing"===t?i={cursor:"text"}:"not_writing"===t&&(i={cursor:"pointer"},r="true",o="false",a=!0,c=!1),i.fontSize=17,s.marginLeft=0,s.width=470,s.height=45,2===n?(i.fontSize=16,s.marginLeft=60,s.width=420,s.height=40):3===n&&(i.fontSize=15,s.marginLeft=110,s.width=395,s.height=35),{readOnly:a,style:i,focus:o,blur:r,autofocus:c,itemDivStyle:s}}}]),n}(s.a.Component),S=n(17),I=n.n(S),w=n(22);function D(e,t,n,i){return _.apply(this,arguments)}function _(){return(_=Object(w.a)(I.a.mark((function e(t,n,i,s){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C(t),t={video_id:i,session_time:n,descriptions:t,user:s},e.abrupt("return",fetch("https://secret-gorge-06842.herokuapp.com/userData",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){var t=[];return e.forEach((function(e){t.push({level:e.level,text:e.text})})),t}var T=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).counter=0,i.sessionTime="",i.state={descriptions:[{key:0,mode:"writing",level:1,selected:!0,text:""}]},i.counter+=1,i.setModeByKey=i.setModeByKey.bind(Object(l.a)(i)),i.getMode=i.getMode.bind(Object(l.a)(i)),i.addStepAfter=i.addStepAfter.bind(Object(l.a)(i)),i.removeWritingStep=i.removeWritingStep.bind(Object(l.a)(i)),i.getSelected=i.getSelected.bind(Object(l.a)(i)),i.getWritingStep=i.getWritingStep.bind(Object(l.a)(i)),i.deselectAll=i.deselectAll.bind(Object(l.a)(i)),i.getIndex=i.getIndex.bind(Object(l.a)(i)),i.getWritingIndex=i.getWritingIndex.bind(Object(l.a)(i)),i.removeItem=i.removeItem.bind(Object(l.a)(i)),i.updateDescendents=i.updateDescendents.bind(Object(l.a)(i)),i.getDescendents=i.getDescendents.bind(Object(l.a)(i)),i.deleteItems=i.deleteItems.bind(Object(l.a)(i)),i.getPrevSibling=i.getPrevSibling.bind(Object(l.a)(i)),i.groupDescriptions=i.groupDescriptions.bind(Object(l.a)(i)),i.getSessionTime=i.getSessionTime.bind(Object(l.a)(i)),i.handleSingleClick=i.handleSingleClick.bind(Object(l.a)(i)),i.handleBlur=i.handleBlur.bind(Object(l.a)(i)),i.handleKeyAction=i.handleKeyAction.bind(Object(l.a)(i)),i.handleDragEnd=i.handleDragEnd.bind(Object(l.a)(i)),i.handleWindowResize=i.handleWindowResize.bind(Object(l.a)(i)),i}return Object(a.a)(n,[{key:"render",value:function(){var e=this;2===this.counter&&(this.sessionTime=this.getSessionTime());var t=this.groupDescriptions(Object(j.a)(this.state.descriptions)).map((function(t,n){return Object(f.jsx)(m.b,{draggableId:n.toString(),index:n,children:function(i){return Object(f.jsx)("div",Object(b.a)(Object(b.a)(Object(b.a)({id:n.toString(),className:"step-div"},i.draggableProps),i.dragHandleProps),{},{ref:i.innerRef,children:t.map((function(t,n){return Object(f.jsx)(k,{id:t.key.toString(),onSingleClick:e.handleSingleClick,onDoubleClick:e.handleDoubleClick,onBlur:e.handleBlur,onKeyPress:e.handleKeyAction,item:t},t.key.toString())}))}),n.toString())}},n.toString())}));return Object(f.jsx)(m.a,{onDragEnd:this.handleDragEnd,children:Object(f.jsx)(m.c,{droppableId:"description-pane-droppable",children:function(e){return Object(f.jsxs)("div",Object(b.a)(Object(b.a)({id:"description-pane-container",ref:e.innerRef},e.droppableProps),{},{children:[t,e.placeholder]}))}})})}},{key:"componentDidUpdate",value:function(e){e.videoID!==this.props.videoID&&this.setState({descriptions:[{key:0,mode:"writing",level:1,selected:!0,text:""}]})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"handleWindowResize",value:function(){}},{key:"getSessionTime",value:function(){var e=new Date;return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate(),"-").concat(e.getHours(),"-").concat(e.getMinutes(),"-").concat(e.getSeconds())}},{key:"groupDescriptions",value:function(e){for(var t=[],n=[],i=0;i<e.length;i++)1===e[i].level?(n.length&&t.push(n),n=[e[i]]):n.push(e[i]),i===e.length-1&&n.length&&t.push(n);return t}},{key:"handleDragEnd",value:function(e){if(null!=e.destination&&e.destination.index!==e.source.index){var t=Object(j.a)(this.state.descriptions),n=e.source.index,i=e.destination.index,s=this.groupDescriptions(t),r=i>n?1:0,o=i>n?0:1;s.splice(i+r,0,s[n]),s.splice(n+o,1),D(t,this.sessionTime,this.props.videoID,this.props.user),this.setState({descriptions:s.flat()})}}},{key:"handleSingleClick",value:function(e,t){var n=Object(j.a)(this.state.descriptions);if(""!==t){var i=this.getIndex(n,e,0),s=this.getWritingIndex(n);s>=0&&(n[s].mode="not_writing"),n[i].mode="writing",(n=this.deselectAll(n))[i].selected=!0,this.setState({descriptions:n})}}},{key:"handleBlur",value:function(e,t){var n=Object(j.a)(this.state.descriptions);if(""!==t){var i=this.getIndex(n,e,0);n[i].mode="not_writing",n[i].text=t}else""===t&&n.length>1&&(n=this.removeWritingStep(n));this.setState({descriptions:n})}},{key:"handleKeyAction",value:function(e,t,n){var i=Object(j.a)(this.state.descriptions);if(46===n.which||"click"===n.type&&"close_btn"===t){var s=null;if((i[s=null===e?this.getSelected(i):this.getIndex(i,e,0)].selected||"click"===n.type&&"close_btn"===t)&&i.length>=2){i=this.deselectAll(i);var r=this.getDescendents(i,s);if(0===s)i[s+r.length].selected=!0;else{var o=this.getPrevSibling(i,s),c=1;if(null!=o)c=this.getDescendents(i,o).length;i[s-c].selected=!0}r.length<i.length&&(D(i=this.deleteItems(i,r),this.sessionTime,this.props.videoID,this.props.user),this.setState({descriptions:i}))}}else if(13===n.which&&""!==t){var a=this.getMode(i,e,0),l=this.getIndex(i,e,0),d=l;if("writing"===a||"not_writing"===a&&i[l].selected){i[l].mode="not_writing",i[l].text=t,i=this.deselectAll(i);var u=this.addStepAfter(i,e,"writing",null),h=Object(g.a)(u,2);(i=h[0])[d=h[1]].selected=!0,i[d].mode="writing",D(i,this.sessionTime,this.props.videoID,this.props.user),this.setState({descriptions:i})}}else if(9===n.which||"click"===n.type){n.preventDefault();var p=this.getIndex(i,e,0);if(p>0){var f=this.getDescendents(i,p);n.shiftKey&&"indent_btn"!==t||("writing"===i[p].mode||"indent_btn"===t)&&i.length>1&&i[p-1].level>=i[p].level&&i[p].level<=2&&(i[p].level+=1,D(i=this.updateDescendents(i,f,"level_increase"),this.sessionTime,this.props.videoID,this.props.user),this.setState({descriptions:i})),(n.shiftKey||"outdent_btn"===t)&&i[p].level>=2&&(i[p].level-=1,D(i=this.updateDescendents(i,f,"level_decrease"),this.sessionTime,this.props.videoID,this.props.user),this.setState({descriptions:i}))}}else if(40===n.which){i=Object(j.a)(this.state.descriptions);var v=this.getIndex(i,e,0);if(v===i.length-1)return void this.setState({descriptions:i});""!==t?(i[v].text=t,i[v].selected=!1,i[v].mode="not_writing",i[v+1].selected=!0,i[v+1].mode="writing"):((i=this.removeItem(i,v))[v].selected=!0,i[v].mode="writing"),this.setState({descriptions:i})}else if(38===n.which){i=Object(j.a)(this.state.descriptions);var b=this.getIndex(i,e,0);if(0===b)return void this.setState({descriptions:i});""!==t?(i[b].text=t,i[b].selected=!1,i[b].mode="not_writing",i[b-1].selected=!0,i[b-1].mode="writing"):((i=this.removeItem(i,b))[b-1].selected=!0,i[b-1].mode="writing"),this.setState({descriptions:i})}else if(40===n.which||38===n.which){i=Object(j.a)(this.state.descriptions);var m=this.getIndex(i,e,0);if(m===i.length-1&&40===n.which)return;if(0===m&&38===n.which)return;var O=!1;if(""===t){if(!(i.length>1))return;i=this.removeItem(i,m),O=!0}else i[m].text=t,i[m].selected=!1,i[m].mode="not_writing";var y=m;40===n.which?!O&&m<i.length-1&&(y=m+1):m>0&&(y=m-1),(i=this.deselectAll(i))[y].selected=!0,i[y].mode="writing",this.setState({descriptions:i})}}},{key:"getIndex",value:function(e,t,n){var i=Object(j.a)(e).map((function(e){return e.key})).indexOf(parseInt(t));return i>=0?i+n:-1}},{key:"getWritingIndex",value:function(e){for(var t=0;t<e.length;t++)if("writing"===e[t].mode)return t;return-1}},{key:"setModeByKey",value:function(e,t,n){var i=Object(j.a)(e),s=i.map((function(e){return e.key})).indexOf(parseInt(t));return s>=0?i[s].mode=n:console.log("step description does not exist"),i}},{key:"getMode",value:function(e,t,n){var i=Object(j.a)(e),s=i.map((function(e){return e.key})).indexOf(parseInt(t));if(void 0!==i[s+n])return i[s+n].mode}},{key:"getSelected",value:function(e){for(var t=0;t<e.length;t++)if(e[t].selected)return t;return-1}},{key:"getWritingStep",value:function(e){for(var t=0;t<e.length;t++)if("writing"===e[t].mode)return t;return-1}},{key:"deselectAll",value:function(e){for(var t=0;t<e.length;t++)e[t].selected&&(e[t].selected=!1);return e}},{key:"addStepAfter",value:function(e,t,n,i){var s=Object(j.a)(e),r=s.map((function(e){return e.key})).indexOf(parseInt(t)),o=i;null===i&&(o=s[r].level);var c=this.getDescendents(s,r),a=c[c.length-1]+1;return s.splice(a,0,{key:this.counter,mode:n,level:o,selected:!0,text:""}),this.counter+=1,[s,a]}},{key:"removeWritingStep",value:function(e){for(var t=Object(j.a)(e),n=Object(j.a)(t),i=1;i<t.length;i++)if("writing"===t[i].mode)return n.splice(i,1),n;return console.log("Didn't find the item, to remove"),n}},{key:"removeItem",value:function(e,t){return e.splice(t,1),e}},{key:"getDescendents",value:function(e,t){for(var n=[t],i=e[t].level,s=t+1;s<e.length&&e[s].level>i;s++)n.push(s);return n}},{key:"updateDescendents",value:function(e,t,n){for(var i=1;i<t.length;i++)"level_increase"===n?e[t[i]].level+=1:"level_decrease"===n&&(e[t[i]].level-=1);return e}},{key:"deleteItems",value:function(e,t){var n=[];return e.forEach((function(e,i){t.includes(i)||n.push(e)})),n}},{key:"getPrevSibling",value:function(e,t){for(var n=t-1;n>0;n--){if(e[n].level<e[t].level)return null;if(e[t].level===e[n].level)return n}return null}},{key:"saveUserData",value:function(e,t){}}]),n}(s.a.Component);n(90);function P(e){return R.apply(this,arguments)}function R(){return(R=Object(w.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://secret-gorge-06842.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t=e.setToken,n=Object(i.useState)(),s=Object(g.a)(n,2),r=s[0],o=s[1],c=Object(i.useState)(),a=Object(g.a)(c,2),l=a[0],d=a[1],u=function(){var e=Object(w.a)(I.a.mark((function e(n){var i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,P({username:r,password:l});case 3:i=e.sent,console.log(i),t(i,r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{id:"login-container",children:[Object(f.jsx)("h1",{id:"login-title",children:"Login"}),Object(f.jsxs)("form",{autoComplete:"off",onSubmit:u,children:[Object(f.jsx)("div",{id:"username-label-div",children:Object(f.jsx)("label",{children:Object(f.jsx)("input",{className:"login-text-input",type:"text",placeholder:"username",onChange:function(e){return o(e.target.value)}})})}),Object(f.jsx)("div",{id:"password-label-div",children:Object(f.jsx)("label",{children:Object(f.jsx)("input",{className:"login-text-input",type:"password",placeholder:"password",autoComplete:"off",onChange:function(e){return d(e.target.value)}})})}),Object(f.jsx)("div",{id:"login-btn-div",children:Object(f.jsx)("button",{type:"submit",children:"Login"})})]})]})}n(91);var W=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={videoId:"",token:""},i.user="",i.setToken=i.setToken.bind(Object(l.a)(i)),i.getToken=i.getToken.bind(Object(l.a)(i)),i.handleVideoPlay=i.handleVideoPlay.bind(Object(l.a)(i)),i}return Object(a.a)(n,[{key:"render",value:function(){return this.getToken()?Object(f.jsxs)("div",{id:"main-container",children:[Object(f.jsx)("div",{id:"player-container",children:Object(f.jsx)(v,{id:"video-player",onVideoPlay:this.handleVideoPlay})}),Object(f.jsx)(T,{id:"description-pane",videoID:this.state.videoId,user:this.user})]}):Object(f.jsx)(A,{setToken:this.setToken})}},{key:"handleVideoPlay",value:function(e){var t=e;if(e.includes("&t=")){var n=e.split("&t=")[0],i=e.split("&t=")[1];i.includes("&v=")&&(i="&v="+i.split("&v=")[1]),t=n+i}this.state.videoId!==t&&this.setState({videoId:t})}},{key:"setToken",value:function(e,t){sessionStorage.setItem("token",JSON.stringify(e)),this.user=t,sessionStorage.setItem("user",this.user),this.forceUpdate()}},{key:"getToken",value:function(){var e=sessionStorage.getItem("token"),t=JSON.parse(e);return this.user=sessionStorage.getItem("user"),null===t||void 0===t?void 0:t.token}},{key:"callAPI",value:function(){var e=this;fetch("http://localhost:9000/testAPI").then((function(e){return e.text()})).then((function(t){return e.setState({apiResponse:t})}))}}]),n}(s.a.Component),N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),s(e),r(e),o(e)}))};o.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(W,{})}),document.getElementById("root")),N()}},[[93,1,2]]]);
//# sourceMappingURL=main.c9428669.chunk.js.map