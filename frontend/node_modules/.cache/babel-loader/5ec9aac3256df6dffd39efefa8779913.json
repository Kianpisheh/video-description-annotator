{"ast":null,"code":"import _classCallCheck from\"/Users/kian/HAKEE/annotator_app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kian/HAKEE/annotator_app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/kian/HAKEE/annotator_app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/kian/HAKEE/annotator_app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kian/HAKEE/annotator_app/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"video.js/dist/video-js.css\";import VideoPlayer from\"./components/VideoPlayer\";import DescriptionPane from\"./components/DescriptionPane\";import Login from\"./components/Login\";import\"./App.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={videoId:\"\",token:\"\"};_this.user=\"\";_this.setToken=_this.setToken.bind(_assertThisInitialized(_this));_this.getToken=_this.getToken.bind(_assertThisInitialized(_this));_this.handleVideoPlay=_this.handleVideoPlay.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"render\",value:function render(){var token=this.getToken();if(!token){return/*#__PURE__*/_jsx(Login,{setToken:this.setToken});}return/*#__PURE__*/_jsxs(\"div\",{id:\"main-container\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"player-container\",children:/*#__PURE__*/_jsx(VideoPlayer,{id:\"video-player\",onVideoPlay:this.handleVideoPlay})}),/*#__PURE__*/_jsx(DescriptionPane,{id:\"description-pane\",videoID:this.state.videoId,user:this.user})]});}},{key:\"handleVideoPlay\",value:function handleVideoPlay(videoUrl){// remove time from the url\nvar newUrl=videoUrl;if(videoUrl.includes('&t=')){var urlFirstHalf=videoUrl.split('&t=')[0];var urlSecondHalf=videoUrl.split('&t=')[1];if(urlSecondHalf.includes(\"&v=\")){urlSecondHalf='&v='+urlSecondHalf.split('&v=')[1];}newUrl=urlFirstHalf+urlSecondHalf;}if(this.state.videoId!==newUrl){this.setState({videoId:newUrl});}}},{key:\"setToken\",value:function setToken(userToken,username){sessionStorage.setItem('token',JSON.stringify(userToken));this.user=username;sessionStorage.setItem('user',this.user);this.forceUpdate();}},{key:\"getToken\",value:function getToken(){var tokenString=sessionStorage.getItem('token');var userToken=JSON.parse(tokenString);this.user=sessionStorage.getItem('user');return userToken===null||userToken===void 0?void 0:userToken.token;}},{key:\"callAPI\",value:function callAPI(){var _this2=this;fetch(\"http://localhost:9000/testAPI\").then(function(res){return res.text();}).then(function(res){return _this2.setState({apiResponse:res});});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/kian/HAKEE/annotator_app/frontend/src/App.js"],"names":["React","VideoPlayer","DescriptionPane","Login","App","props","state","videoId","token","user","setToken","bind","getToken","handleVideoPlay","videoUrl","newUrl","includes","urlFirstHalf","split","urlSecondHalf","setState","userToken","username","sessionStorage","setItem","JSON","stringify","forceUpdate","tokenString","getItem","parse","fetch","then","res","text","apiResponse","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nimport \"video.js/dist/video-js.css\";\n\nimport VideoPlayer from \"./components/VideoPlayer\";\nimport DescriptionPane from \"./components/DescriptionPane\";\nimport Login from \"./components/Login\"\n\nimport \"./App.css\";\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { videoId: \"\", token: \"\" };\n        this.user = \"\";\n\n        this.setToken = this.setToken.bind(this);\n        this.getToken = this.getToken.bind(this);\n        this.handleVideoPlay = this.handleVideoPlay.bind(this);\n\n    }\n\n    render() {\n        \n        const token = this.getToken();\n\n        if (!token) {\n            return <Login setToken={this.setToken} />\n        }\n\n        return (\n            <div id=\"main-container\">\n                <div id=\"player-container\">\n                    <VideoPlayer id=\"video-player\" onVideoPlay={this.handleVideoPlay} />\n                </div>\n                <DescriptionPane id=\"description-pane\" videoID={this.state.videoId} user={this.user} />\n            </div>\n        );\n    }\n\n    handleVideoPlay(videoUrl) {\n        \n        // remove time from the url\n        let newUrl = videoUrl;\n        if (videoUrl.includes('&t=')) {\n            const urlFirstHalf = videoUrl.split('&t=')[0];\n            let urlSecondHalf = videoUrl.split('&t=')[1];\n            if (urlSecondHalf.includes(\"&v=\")) {\n                urlSecondHalf = '&v=' + urlSecondHalf.split('&v=')[1];\n            }\n            newUrl = urlFirstHalf + urlSecondHalf;\n        }\n        \n        if (this.state.videoId !== newUrl) {\n            this.setState({videoId: newUrl})\n        }\n    }\n\n    setToken(userToken, username) {\n        sessionStorage.setItem('token', JSON.stringify(userToken));\n        this.user = username;\n        sessionStorage.setItem('user', this.user);\n        this.forceUpdate();\n    }\n    \n    getToken() {\n        const tokenString = sessionStorage.getItem('token');\n        const userToken = JSON.parse(tokenString);\n        this.user = sessionStorage.getItem('user');\n        return userToken?.token\n    }\n\n    callAPI() {\n        fetch(\"http://localhost:9000/testAPI\")\n            .then(res => res.text())\n            .then(res => this.setState({ apiResponse: res }));\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}